# ============================================
# 📌 本番環境用設定ファイル
# ============================================
# このファイルを .env にコピーして本番環境で使用してください
# 各項目を実際の環境に合わせて変更してください
#
# セットアップ手順:
# 1. このファイルを .env にコピー
# 2. 🔴マークの項目を必ず変更
# 3. php artisan key:generate を実行
# 4. php artisan migrate を実行
# 5. php artisan config:cache を実行
# ============================================

# ============================================
# 🔴 重大な問題1: デバッグモード
# ============================================
# ⚠️ APP_DEBUG=true のままだとセキュリティリスク！
# エラー画面でDB接続情報、APIキー等の機密情報が漏洩します

APP_NAME="読書記録システム"
APP_ENV=production  # 🔴 必ず production に設定
APP_KEY=base64:a39K22U5W7x0FddJpetqWMkkcEBTJ+auA0r+GoCUZQk=  # 🔴 本番では新しいキーを生成: php artisan key:generate
APP_DEBUG=false  # 🔴 絶対にfalse！trueは危険です
APP_URL=https://your-domain.com  # 🔴 実際のドメインに変更（例: https://reading.example.com）

APP_LOCALE=ja
APP_FALLBACK_LOCALE=ja
APP_FAKER_LOCALE=ja_JP

APP_MAINTENANCE_DRIVER=file

BCRYPT_ROUNDS=12

LOG_CHANNEL=stack
LOG_STACK=daily
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=error  # errorまたはwarningを推奨（debugは本番環境では不要）

# ============================================
# 🔴 重大な問題2: データベース設定
# ============================================
# ⚠️ SQLiteは本番環境に不適切！
# MySQL または PostgreSQL を使用してください
#
# データベース作成コマンド（MySQL）:
# CREATE DATABASE reading_management_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
# CREATE USER 'reading_user'@'localhost' IDENTIFIED BY 'secure_password_here';
# GRANT ALL PRIVILEGES ON reading_management_db.* TO 'reading_user'@'localhost';

DB_CONNECTION=mysql  # 🔴 mysqlまたはpgsql
DB_HOST=127.0.0.1  # 🔴 データベースサーバーのホスト
DB_PORT=3306  # MySQL: 3306, PostgreSQL: 5432
DB_DATABASE=reading_management_db  # 🔴 作成したデータベース名
DB_USERNAME=reading_user  # 🔴 データベースユーザー名
DB_PASSWORD=secure_password_here  # 🔴 強固なパスワード（20文字以上推奨）

# PostgreSQL を使用する場合はコメントを外してください
# DB_CONNECTION=pgsql
# DB_PORT=5432

# ============================================
# 🔴 重大な問題3: HTTPS・セキュリティ設定
# ============================================
# ⚠️ SESSION_SECURE_COOKIE=false のままだと
# HTTPで通信するためセッションハイジャックのリスクあり！

SESSION_DRIVER=database  # 複数サーバー対応のため database または redis を推奨
SESSION_LIFETIME=10080  # 7日間（分単位） ※開発時の525600分（1年）は長すぎる
SESSION_ENCRYPT=false  # 通常はfalseでOK（trueにするとパフォーマンス低下）
SESSION_PATH=/
SESSION_DOMAIN=  # サブドメインでも共有する場合: .your-domain.com
SESSION_EXPIRE_ON_CLOSE=false
SESSION_SECURE_COOKIE=true  # 🔴 HTTPS環境では必ずtrue！
SESSION_HTTP_ONLY=true  # JavaScriptからのアクセスを防ぐ
SESSION_SAME_SITE=lax  # CSRF攻撃対策
SESSION_COOKIE=reading_session

# ============================================
# キャッシュ・キュー・ストレージ設定
# ============================================
BROADCAST_CONNECTION=log
FILESYSTEM_DISK=local  # S3を使う場合: s3
QUEUE_CONNECTION=database  # 非同期処理を使う場合: redis

# Redisを使うとパフォーマンスが大幅に向上します（推奨）
CACHE_STORE=database  # Redisがあれば: redis

MEMCACHED_HOST=127.0.0.1

# Redis設定（オプション：パフォーマンス向上のため推奨）
REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null  # Redisにパスワードを設定している場合は入力
REDIS_PORT=6379

# ============================================
# メール設定（パスワードリセット機能で必要）
# ============================================
# Gmail, SendGrid, Mailgun, Amazon SES等のSMTPサービスを設定

# Gmailの場合（アプリパスワードを使用）:
MAIL_MAILER=smtp
MAIL_SCHEME=null
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com  # 送信元メールアドレス
MAIL_PASSWORD=your-app-password  # Googleアプリパスワード
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="noreply@your-domain.com"
MAIL_FROM_NAME="${APP_NAME}"

# SendGridの場合:
# MAIL_MAILER=smtp
# MAIL_HOST=smtp.sendgrid.net
# MAIL_PORT=587
# MAIL_USERNAME=apikey
# MAIL_PASSWORD=your-sendgrid-api-key
# MAIL_ENCRYPTION=tls

# ============================================
# Google Books API（推奨設定）
# ============================================
# 現在はAPIキーなしでも動作しますが、
# レート制限に引っかかる可能性があるため設定を推奨
#
# 取得方法:
# 1. https://console.cloud.google.com/ にアクセス
# 2. プロジェクトを作成
# 3. Google Books API を有効化
# 4. 認証情報を作成してAPIキーを取得

GOOGLE_BOOKS_API_KEY=  # 取得したAPIキーを入力

# ============================================
# AWS設定（S3でファイルストレージを使う場合）
# ============================================
# 本の表紙画像などをS3に保存する場合に設定
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=ap-northeast-1  # 東京リージョン
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

VITE_APP_NAME="${APP_NAME}"
